---
title: 'WÅ‚asne bloki w WordPress Gutenberg #005 â€“  toolbar'
seoTitle: Toolbar (pasek narzÄ™dzi) we wÅ‚asnych blokach Gutenberg
abstract: W tej czÄ™Å›ci serii WordPress Gutenberga, zedytujemy toolbar tworzonego bloku. Usuniemy trochÄ™Â domyÅ›lnych przyciskÃ³w i dodamy swÃ³j ğŸŒ±
isPublished: true
topics:
  - WordPress
  - WÅ‚asne bloki w WordPress Gutenberg
date: 24.03.2021
isPopular: false
---

W tej czÄ™Å›ci serii o tworzeniu blokÃ³w w Gutenbergu, pokaÅ¼Ä™ Ci kolejne 4 komponenty wbudowane (i piÄ…ty przy okazji zadania domowego), ktÃ³re na pewno przydadzÄ… Ci siÄ™ podczas tworzenia wÅ‚asnych blokÃ³w i dodatkowo, jeszcze bardziej przyzwyczajÄ… CiÄ™ do siebie.

import VideoInterlude from 'VideoInterlude';

<VideoInterlude id="OpdXDQrzHwk" title="WÅ‚asne bloki w WordPress Gutenberg #005 - toolbar" />

W tytule tego wpisu, moÅ¼esz zauwaÅ¼yÄ‡, Å¼e powiemy sobie o toolbarze. Dla naszego bloku spisu treÅ›ci (a precyzyjnie mÃ³wiÄ…c - dla RichTextu, ktÃ³ry jest tu bazÄ…), prezentuje siÄ™ on w ten oto sposÃ³b:

![](./toolbar.jpg)

DziÅ› usuniemy z niego niektÃ³re elementy (odpowiedzialne za kilka sposobÃ³w formatowania tekstu) i dodamy jeden nowy, aby mieÄ‡ pod rÄ™kÄ… tylko te rzeczy, ktÃ³re przydadzÄ… siÄ™ w spisie treÅ›ci.

## Zacznijmy od usuniÄ™cia niektÃ³rych opcji formatowania z toolbara naszego RichTextu

Czyli de facto, od wybrania, jakie domyÅ›lne buttony bÄ™dÄ… siÄ™ w nim znajdowaÄ‡. Bo tak, przyciski moÅ¼emy usuwaÄ‡, podajÄ…c tablicÄ™ z grupÄ… tych, ktÃ³re chcemy zostawiÄ‡, w propsie do naszego RichTextu.

A props ten, to `allowedFormats`:

```jsx
<RichText
  tagName="h2"
  placeholder="TytuÅ‚ spisu treÅ›ci"
  value={title}
  onChange={setTitle}
  allowedFormats={[
    'core/bold',
    'core/italic',
    'core/link',
    'core/text-color',
    'core/strikethrough',
  ]}
/>
```

PodajÄ…c takÄ… oto tablicÄ™, mÃ³wimy naszemu Gutenbergowi, Å¼e dla tego konkretnego RichTextu (tutaj tytuÅ‚u spisu treÅ›ci), ma on wyÅ›wietliÄ‡ te 5 konkretnych przyciskÃ³w, pozwalajÄ…cych formatowaÄ‡ konkretny tekst.

> JeÅ›li chcesz dowiedzieÄ‡ siÄ™, jakie formaty sÄ… dostÄ™pne dla RichTextu w Twoim Gutenbergu i jak dokÅ‚adnie siÄ™ nazywajÄ…, to moÅ¼esz wpisaÄ‡ nastÄ™pujÄ…cÄ… komendÄ™ w konsolÄ™ swojej przeglÄ…darki:

```jsx
wp.data.select('core/rich-text').getFormatTypes();
```

W ten sposÃ³b:

[![](./wszytkie-formaty-w-gutenbergu.jpg)]()

## A teraz, dodajmy nowy przycisk

To z kolei, moÅ¼emy zrobiÄ‡ dziÄ™ki edycji toolbara, juÅ¼ z poziomu kodu samego bloku. A potrzebowaÄ‡ bÄ™dziemy kilka wbudowanych komponentÃ³w, o ktÃ³rych wspomniaÅ‚em Ci na poczÄ…tku. Zaimportujmy je do naszego gÅ‚Ã³wnego pliku z blokiem spisu treÅ›ci:

```jsx
import { Toolbar, ToolbarButton, Icon } from '@wordpress/components';
import { RichText, BlockControls } from '@wordpress/block-editor';
```

OczywiÅ›cie `RichText` z pierwszej linii jest tym samym, ktÃ³rego zaimportowaÅ‚em w poprzedniej czÄ™Å›ci kursu. `BlockControls` z kolei, jest importowany razem z nim, bo pochodzÄ… z tej samej paczki.

Dodatkowo, jako Å¼e zaczÄ™liÅ›my korzystaÄ‡ z nowej paczki, muszÄ™ umieÅ›ciÄ‡ informacjÄ™ o niej w pliku wtyczki (`table-of-contents.php`):

```jsx
wp_register_script(
  'table-of-contents',
  plugin_dir_url(__FILE__) . 'build/index.js',
  array('wp-blocks', 'wp-editor', 'wp-components')
);
```

> Przy okazji - w nastÄ™pnej czÄ™Å›ci dodamy sporo dodatkowych zaleÅ¼noÅ›ci, wiÄ™c przy okazji pokaÅ¼Ä™ Ci, jak moÅ¼emy robiÄ‡ to automatycznie, a przez to znacznie wygodniej ğŸ‰

I teraz, jestem w stanie uÅ¼yÄ‡ naszych komponentÃ³w w funkcji `edit()`:

```jsx
edit({ attributes, setAttributes }) {
  // ...

  return (
    <div class="table-of-contents">

      <BlockControls>
        <Toolbar>
          <ToolbarButton
            label="Zaznaczenie"
            onClick={() => console.log("Przycisk zostaÅ‚ klikniÄ™ty!")}
          >
            <Icon icon="admin-customizer" />
          </ToolbarButton>
        </Toolbar>
      </BlockControls>

      <RichText .../>
      <RichText .../>
    </div>
  );
}
```

Jak moÅ¼esz zauwaÅ¼yÄ‡, naszym dodatkowym przyciskiem jest tak naprawdÄ™ komponent `<ToolbarButton />`, ktÃ³ry doÅ‚Ä…czamy do bloku w ramach komponentu `<Toolbar />`, ktÃ³ry stanowi grupÄ™ na nasze buttony i zawiera siÄ™ z kolei w komponencie `<BlockControls />`. On z kolei stanowi przestrzeÅ„ wszystkich narzÄ™dzi formatowania naszego bloku. DokÅ‚adnie tej:

![](./toolbar-zaznaczony.jpg)

Czyli de facto przestrzeni, do ktÃ³rej bÄ™dziemy w stanie dodaÄ‡ buttony, rÃ³wnieÅ¼ za pomocÄ… Format API, o ktÃ³rym powiemy sobie w nastÄ™pnej czÄ™Å›ci serii.

I teraz jesteÅ›my w stanie zaczÄ…Ä‡ bawiÄ‡ siÄ™ z naszym nowo dodanym przyciskiem, jak z kaÅ¼dym innym komponentem. Dla przykÅ‚adu, ja stworzÄ™ nowy atrybut, ktÃ³ry bÄ™dzie mÃ³wiÄ‡ nam, czy button jest aktywny i zmieniaÄ‡ jego stan (za pomocÄ… propsa `isActive`):

```jsx
attributes: {
  // ...
  isHighlightButtonActive: {
    type: "boolean",
  },
},

edit({ attributes, setAttributes }) {
  const { title, list, isHighlightButtonActive } = attributes;

  // ...

  function setHighlightButtonState() {
    setAttributes({ isHighlightButtonActive: !isHighlightButtonActive });
  }

  return (
    <div class="table-of-contents">

      <BlockControls>
        <Toolbar>
          <ToolbarButton
            label="Zaznaczenie"
            className="highlight-button"
            onClick={setHighlightButtonState}
            isActive={isHighlightButtonActive}
          >
            <Icon icon="admin-customizer" />
          </ToolbarButton>
        </Toolbar>
      </BlockControls>

      <RichText .../>
      <RichText .../>
    </div>
  );
}
```

W kilku miejscach (dla przejrzystoÅ›ci) pominÄ…Å‚em kod, ktÃ³ry napisaliÅ›my w poprzednich czÄ™Å›ciach serii. CaÅ‚oÅ›Ä‡ znajdziesz na moim [GitHubie](https://github.com/robert-orlinski/gutenberg-blocks-course-files/tree/005).

## Co dalej?

Tak jak udaÅ‚o mi siÄ™ wspomnieÄ‡, w nastÄ™pnej czÄ™Å›ci powiem Ci o Format API, czyli zbiorze metod, z ktÃ³rych Gutenberg pozwala nam korzystaÄ‡, aby tworzyÄ‡ nowe narzÄ™dzia formatowania. Dodamy moÅ¼liwoÅ›Ä‡ zaznaczania poszczegÃ³lnych tekstÃ³w <span style={{ backgroundColor: 'var(--highlight)' }}>w taki oto sposÃ³b ğŸŒ¿</span>

> Jak mogÅ‚aÅ› lub mogÅ‚eÅ› zauwaÅ¼yÄ‡, w naszym nowym bloku czÄ™sto pojawiaÅ‚o siÄ™ sÅ‚Ã³wko highlight - to wÅ‚aÅ›nie dlatego, Å¼e jego zadaniem niedÅ‚ugo podÅ›wietlanie tekstu na niebiesko.

## I oczywiÅ›cie zadanie domowe!

Za pomocÄ… wbudowanego komponentu [`<DropdownMenu />`](https://github.com/WordPress/gutenberg/tree/trunk/packages/components/src/dropdown-menu) sprÃ³buj umieÅ›ciÄ‡ swoje dodatkowe przyciski, w ramach menu rozwijanego. StwÃ³rz coÅ› w tym rodzaju:

![](menu-rozwijane.jpg)

JeÅ›li tylko trafisz na jakiekolwiek trudnoÅ›ci lub czymÅ› bÄ™dziesz chciaÅ‚ lub chciaÅ‚a siÄ™ podzieliÄ‡ (w zwiÄ…zku z zadaniem lub caÅ‚ym artykuÅ‚em), koniecznie daj znaÄ‡ w komentarzu!
