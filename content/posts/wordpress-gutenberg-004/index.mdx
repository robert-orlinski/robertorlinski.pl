---
title: 'WÅ‚asne bloki w WordPress Gutenberg #004 â€“  RichText'
seoTitle: RichText - idealny sposÃ³b na pola tekstowe w Gutenbergu
abstract: RichText, to wbudowany komponent WordPress Gutenberga i jednoczeÅ›nie, idealny sposÃ³b na dodawanie pÃ³l tekstowych, do naszych blokÃ³w ğŸ’ª
isPublished: true
topics:
  - WordPress
  - WÅ‚asne bloki w WordPress Gutenberg
date: 18.01.2021
isPopular: false
---

Pora zaczÄ…Ä‡ tworzyÄ‡ nasz spis treÅ›ci w taki sposÃ³b, aby zaczÄ…Å‚ w koÅ„cu przypominaÄ‡ spis treÅ›ci!

A tak jak wszystkie bloki i elementy interfejsu w Gutenbergu, tak i nasz spis treÅ›ci, bÄ™dzie zawieraÅ‚ w sobie [wbudowane komponenty Gutenberga](https://github.com/WordPress/gutenberg/tree/master/packages/components/src).

A najczÄ™Å›ciej wykorzystywanym komponentem (gdy chodzi o tworzenie konkretnych blokÃ³w), jest tekst sformatowany. WiÄ™c to wÅ‚aÅ›nie o nim, chcÄ™ Ci opowiedzieÄ‡ w tej czÄ™Å›ci.

import VideoInterlude from 'VideoInterlude';

<VideoInterlude id="51xGSH7Nbkk" title="WÅ‚asne bloki w WordPress Gutenberg #004 â€“ RichText" />

## Dlaczego akurat [RichText](https://developer.wordpress.org/block-editor/developers/richtext/)?

Zdecydowana wiÄ™kszoÅ›Ä‡ naszych blokÃ³w, bÄ™dzie zawieraÅ‚a w sobie jakieÅ› teksty. Wobec tego, nie ma Å¼adnego sensu, Å¼ebyÅ›my wymyÅ›lali koÅ‚o na nowo, gdy wÅ‚aÅ›nie RichText, pozwala nam taki tekst bardzo Å‚adnie uÅ‚oÅ¼yÄ‡ i sformatowaÄ‡.

W koÅ„cu domyÅ›lne zachowanie nagÅ‚Ã³wkÃ³w, paragrafÃ³w, list i tym podobnych elementÃ³w w Gutenbergu, jest bardzo przyjemne! A to wÅ‚aÅ›nie tekst sformatowany, stoi za tym zachowaniem.

## Wobec tego, jak moÅ¼emy go uÅ¼yÄ‡?

W pierwszej kolejnoÅ›ci, musimy go zaimportowaÄ‡, do naszego gÅ‚Ã³wnego pliku JavaScriptu, nad ktÃ³rym caÅ‚y czas pracujemy:

```jsx
import { RichText } from '@wordpress/block-editor';
```

JednoczeÅ›nie pamiÄ™tajÄ…c o dodaniu zaleÅ¼noÅ›ci `wp-editor`, do pliku PHP, w ktÃ³rym pobieramy wszystkie assety, zwiÄ…zane z tworzonym przez nas blokiem (ktÃ³re udaÅ‚o nam siÄ™ zdefiniowaÄ‡ juÅ¼ w [pierwszej czÄ™Å›ci serii o Gutenbergu](https://robertorlinski.pl/2020/11/16/wordpress-gutenberg-001/)):

```php
wp_register_script(
  'table-of-contents',
  plugin_dir_url( __FILE__ ) . 'build/index.js',
  array( 'wp-blocks', 'wp-editor' )
);
```

I od teraz, w funkcji `edit()`, bÄ™dziemy w stanie skorzystaÄ‡ z tagu:

```jsx
<RichText />
```

...a w funkcji `save()`, z wÅ‚aÅ›ciwoÅ›ci `Content`, tego samego tagu:

```jsx
<RichText.Content />
```

## W takim razie, jakie atrybuty moÅ¼emy przypisaÄ‡ do naszych tagÃ³w?

Opowiem Ci o tych najwaÅ¼niejszych oraz takich, ktÃ³re bezpoÅ›rednio przydadzÄ… nam siÄ™ w samym tworzeniu spisu treÅ›ci.

ResztÄ™ z kolei, bÄ™dziesz miaÅ‚/a okazjÄ™ poznaÄ‡, przy okazji zadania domowego, wiÄ™c (jak tak naprawdÄ™ zawsze) warto bÄ™dzie je przerobiÄ‡!

### MoÅ¼e najpierw tag `<RichText />` w funkcji `edit()`

Zacznijmy od tagÃ³w wymaganych; jest ich dokÅ‚adnie dwÃ³jka:

- **value** - tutaj umieszczamy konkretny atrybut, ktÃ³ry ulegnie zmianie, wg tego, jaki tekst wrzucimy w naszym polu;
- **onChange** - metoda, ktÃ³ra uruchamia siÄ™ za kaÅ¼dym razem, gdy nasze pole, zostanie zedytowane - zazwyczaj bÄ™dziemy uÅ¼ywaÄ‡ jej po prostu do aktualizacji atrybutÃ³w, pÃ³Åºniej przekazywanych do funkcji `edit()`.

I dalej mamy kilka atrybutÃ³w opcjonalnych, ktÃ³rych uÅ¼yjemy w przypadku naszego spisu treÅ›ci:

- **tagName** - tag, w ramach ktÃ³rego zostanie wyÅ›wietlone nasze pole;
- **placeholder** - tekst, ktÃ³ry pokaÅ¼e siÄ™, gdy nie zaczniemy jeszcze edytowaÄ‡ samego pola
- **multiline** - podobnie jak w przypadku atrybutÃ³w, tak i tu podajemy tag, w ramach ktÃ³rego zostanie zamkniÄ™ta kaÅ¼da kolejna linia, jakÄ… dodamy do naszego tekstu formatowanego (np. w ramach tagu `<li>` lub `<p>`).

### Z kolei dla `<RichText.Content />` w funkcji `save()`, nie musimy pamiÄ™taÄ‡ wielu atrybutÃ³w

KorzystaÄ‡ bÄ™dziemy dokÅ‚adnie z dwÃ³ch (i to powtarzajÄ…cych siÄ™ z poprzedniÄ… listÄ…):

- **value**;
- **tagName**.

PozwoliÅ‚em sobie nie dublowaÄ‡ ich tÅ‚umaczenia.

## UÅ¼yjmy tekstu sformatowanego w naszym bloku!

Aby nie rozmieniaÄ‡ siÄ™ na drobne, podrzucam Ci caÅ‚y kod spisu treÅ›ci, ktÃ³ry pozwoli go zrealizowaÄ‡ za pomocÄ… dwÃ³ch pÃ³l RichText. OczywiÅ›cie waÅ¼niejsze jego elementy, wytÅ‚umaczÄ™ Ci trochÄ™ niÅ¼ej:

```jsx
import './index.scss';
import { registerBlockType } from '@wordpress/blocks';
import { RichText } from '@wordpress/block-editor';

registerBlockType('rob/table-of-contents', {
  title: 'Spis treÅ›ci',
  description: 'Sekcja z nagÅ‚Ã³wiem oraz spisem treÅ›ci, konkretnego artykuÅ‚u',
  icon: 'editor-table',
  keywords: ['zawartoÅ›Ä‡', 'lista', 'table of contents'],
  category: 'content',

  attributes: {
    title: {
      type: 'string',
      source: 'html',
      selector: 'h2',
    },
    list: {
      type: 'array',
      source: 'children',
      selector: 'ol',
    },
  },

  edit({ attributes, setAttributes }) {
    const { title, list } = attributes;

    function setTitle(newTitle) {
      setAttributes({ title: newTitle });
    }

    function setListContent(newList) {
      setAttributes({ list: newList });
    }

    return (
      <div class="table-of-contents">
        <RichText tagName="h2" placeholder="TytuÅ‚ spisu treÅ›ci" value={title} onChange={setTitle} />
        <RichText
          tagName="ol"
          placeholder="Spis treÅ›ci"
          value={list}
          multiline="li"
          onChange={setListContent}
        />
      </div>
    );
  },

  save({ attributes }) {
    const { title, list } = attributes;

    return (
      <div class="table-of-contents">
        <h2>{title}</h2>
        <RichText.Content tagName="ol" value={list} />
      </div>
    );
  },
});
```

Tak naprawdÄ™ nie zmieniÅ‚o siÄ™ tutaj duÅ¼o, od [poprzedniego wpisu](./wordpress-gutenberg-003) - caÅ‚oÅ›Ä‡ zostaÅ‚a bardziej rozbudowana, niÅ¼ przepisana.

W pierwszej kolejnoÅ›ci, w atrybutach widzimy nowy atrybut: `list`, ktÃ³ry bÄ™dzie zawieraÅ‚ w sobie sam spis treÅ›ci, i ktÃ³ry jest rÃ³wnieÅ¼ rozwiÄ…zaniem zadania domowego, z [czÄ™Å›ci o atrybutach w Gutenbergu](./wordpress-gutenberg-003)!

PÃ³Åºniej mamy 2 funkcje, odpowiedzialne za zmianÄ™ poszczegÃ³lnych atrybutÃ³w, podczas edycji odpowiadajÄ…cych im pÃ³l tekstowych. I przy nich warto siÄ™ na chwilkÄ™ zatrzymaÄ‡.

Poprzednio owe atrybuty, zmienialiÅ›my wrzucajÄ…c do nich wartoÅ›ci pobrane z eventÃ³w, a teraz, zupeÅ‚nie tak nie jest!

Jak widaÄ‡, np. przy kaÅ¼dej edycji pola z tytuÅ‚em, atrybut `title`, zostaje po prostu zastÄ…piony zmiennÄ… `newTitle`. A dzieje siÄ™ tak, bo **RichText nie przekazuje do naszej funkcji caÅ‚ego eventu, a tylko wpisywanÄ… do niego wartoÅ›Ä‡, ktÃ³rÄ… od razu jesteÅ›my w stanie uÅ¼yÄ‡**.

Dalej uÅ¼ywamy juÅ¼ naszych tagÃ³w RichText z atrybutami, o ktÃ³rych mieliÅ›my okazjÄ™ pomÃ³wiÄ‡ sobie w jednym poprzednich akapitÃ³w.

## I to tyle! Od teraz wiesz juÅ¼ jak najlepiej dodawaÄ‡ miejsca na tekst w Twoich blokach âœ¨

I jak zawsze - nie moÅ¼e obyÄ‡ siÄ™ bez zadania domowego!

Zajrzyj pod ten [link i przeczytaj wiÄ™cej o wszystkich wÅ‚aÅ›ciwoÅ›ciach](https://github.com/WordPress/gutenberg/blob/master/packages/block-editor/src/components/rich-text/README.md), z ktÃ³rych pozwala korzystaÄ‡ ten komponent.

Znajdziesz tam wiele dodatkowych informacji, ktÃ³re na pewno Ci siÄ™ przydadzÄ…, przy tworzeniu wÅ‚asnych blokÃ³w Gutenberga! ğŸ‰
