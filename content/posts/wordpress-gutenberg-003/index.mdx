---
title: 'WÅ‚asne bloki w WordPress Gutenberg #003 â€“  atrybuty'
seoTitle: Atrybuty w WordPress Gutenberg
abstract: Jak deklaruje siÄ™ atrybuty w WordPress Gutenberg, ktÃ³re stanowiÄ…Â spoiwo edytowanego i wyÅ›wietlanego bloku? O tym jest ten artykuÅ‚!
isPublished: true
topics:
  - WordPress
  - WÅ‚asne bloki w WordPress Gutenberg
date: 23.12.2020
isPopular: false
---

Atrybuty w WordPress Gutenbergu, pozwalajÄ… nam definiowaÄ‡, jakie dane, bÄ™dÄ… przekazywane podczas edycji bloku, a pÃ³Åºniej wyÅ›wietlane na front-endzie.

**SÄ… spoiwem**, ktÃ³re mÃ³wi parserowi, na jakie dane ma zwrÃ³ciÄ‡ uwagÄ™ zapisujÄ…c HTML konkretnego bloku do bazy danych i pÃ³Åºniej go odczytujÄ…c (bo tak, **bloki Gutenberga sÄ… zapisywane w bazie danych, w formie HTMLa**, o czym sobie jeszcze powiemy).

import VideoInterlude from 'VideoInterlude';

<VideoInterlude id="8G2fhYcAySM" title="WÅ‚asne bloki w WordPress Gutenberg #003 â€“ atrybuty" />

## W takim razie, jak moÅ¼emy je deklarowaÄ‡?

Robimy to w kodzie konkretnego bloku, deklarujÄ…c je, jako osobnÄ… wÅ‚aÅ›ciwoÅ›Ä‡, nad gÅ‚Ã³wnymi metodami `edit()` oraz `save()`, w ten oto sposÃ³b:

```js
attributes: {
  title: {
    type: 'string',
  },
},
```

W ten sposÃ³b, dajemy znaÄ‡ Gutenbergowi, Å¼e do customowego bloku, przekazywana bÄ™dzie wartoÅ›Ä‡ o identyfikatorze `title`, o typie string.

## WÅ‚aÅ›nie - typy atrybutÃ³w!

**Jest to jedyna wartoÅ›Ä‡, jakÄ… musimy wrzuciÄ‡ do naszego atrybutu, aby caÅ‚oÅ›Ä‡ zaczÄ™Å‚a dziaÅ‚aÄ‡.** O reszcie zaraz sobie powiemy, ale na ten moment, to jest jedyny niezbÄ™dny element.

Atrybuty, majÄ… 7 typÃ³w (idÄ…c za [dokumentacjÄ…](https://developer.wordpress.org/block-editor/developers/block-api/block-attributes/)):

- null;
- array;
- object;
- string;
- integer;
- boolean;
- number.

DziÄ™ki temu, korzystajÄ…c z konkretnego atrybutu, JavaScript od razu bÄ™dzie wiedzieÄ‡ jakiego typu jest dany parametr i w sposÃ³b wÅ‚aÅ›ciwy dla danego typu, bÄ™dzie go traktowaÄ‡.

> I tu warto wspomnieÄ‡ o jednej kwestii organizacyjnej - mianowicie ten artykuÅ‚ jest bardzo teoretyczny. OpisujÄ™ w nim wszystko, co powinieneÅ› wiedzieÄ‡ o samych atrybutach, ale po dziaÅ‚ajÄ…cy kod, ktÃ³ry wyÅ›wietli wartoÅ›Ä‡

## Poza tym, mamy rÃ³wnieÅ¼ ÅºrÃ³dÅ‚o konkretnego atrybutu

I tu dochodzimy do tego, o czym wspominaÅ‚em na poczÄ…tku:

> WordPress Gutenberg zapisuje wszystkie bloki, razem z wartoÅ›ciami, ktÃ³re sÄ… do nich wrzucane, w bazie danych w postaci kodu HTML.
>
> Dopiero parser, w jego przypadku biblioteka [HPQ](https://github.com/aduth/hpq), wyciÄ…ga dane wartoÅ›ci z kodu, aby poprawnie je wyÅ›wietliÄ‡.

Co to dla nas oznacza?

OtÃ³Å¼ to, Å¼e przykÅ‚adowy, mega prosty blok, w bazie bÄ™dzie wyglÄ…daÄ‡ w ten oto sposÃ³b:

```html
<!-- wp:rob/table-of-contents {"title":"Pewien Å‚adny tytuÅ‚"} -->
<nav class="table-of-contents" class="wp-block-rob-table-of-contents">
  <h2>Pewien Å‚adny tytuÅ‚</h2>
</nav>
<!-- /wp:rob/table-of-contents -->
```

A przynajmniej tak bÄ™dzie wyglÄ…daÄ‡, gdy nie sprecyzujemy ÅºrÃ³dÅ‚a konkretnego atrybutu, czyli zapiszemy go tak, jak w pierwszym przykÅ‚adzie.

Bo tak, moÅ¼emy sprecyzowaÄ‡ ÅºrÃ³dÅ‚o danego atrybutu, na przykÅ‚ad okreÅ›lajÄ…c je jako `html`, w ten sposÃ³b:

```js
attributes: {
  title: {
    type: 'string',
    source: 'html',
    selector: "h2",
  },
},
```

...co w poÅ‚Ä…czeniu z ostatniÄ… wÅ‚aÅ›ciwoÅ›ciÄ… `selector`, pozwoli parserowi, **wyciÄ…gnÄ…Ä‡ konkretny atrybut Gutenberga, z kodu HTMLa, dokÅ‚adnie z selektora h2.**

Co w bazie danych, nie zapisze siÄ™ juÅ¼ w taki sposÃ³b, jak widaÄ‡ powyÅ¼ej, ale w taki:

```html
<!-- wp:rob/table-of-contents -->
<nav class="table-of-contents" class="wp-block-rob-table-of-contents">
  <h2>TytuÅ‚ spisu treÅ›ci</h2>
</nav>
<!-- /wp:rob/table-of-contents -->
```

W koÅ„cu Gutenberg nie potrzebuje juÅ¼ naszego atrybutu, zaszytego w obiekcie, wrzuconym w komentarzu, bo wie, Å¼e ma sobie go pobraÄ‡ z kodu HTML, dokÅ‚adnie z selektora `<h2>`, ktÃ³rego napotka podczas przetwarzania powyÅ¼szego kodu.

## Powiedzmy sobie jeszcze trochÄ™ o samych ÅºrÃ³dÅ‚ach

PozwolÄ™ sobie wyrÃ³Å¼niÄ‡ 5 atrybutÃ³w, bo to one przydajÄ… siÄ™ najczÄ™Å›ciej:

- html (juÅ¼ pokazany na przykÅ‚adzie);
- text;
- attribute;
- children;
- query;

A omÃ³wiÄ™ 3 ostatnie, bo pierwsze zostaÅ‚y juÅ¼ wspomniane (i nie da siÄ™ ukryÄ‡ - sÄ… siÅ‚Ä… rzeczy najprostsze).

### Å¹rÃ³dÅ‚o - attribute

Tutaj jako wartoÅ›Ä‡ naszego gutenbergowego atrybutu, pobieramy atrybut danego elementu HTMLa, dla przykÅ‚adu `src` z obrazka:

```js
attributes: {
  title: {
    type: 'string',
    source: 'attribute',
    selector: "img",
    attribute: 'src',
  },
},
```

Wtedy rÃ³wnieÅ¼, poza zdefiniowaniem naszego selektora, musimy podaÄ‡ nazwÄ™ konkretnego atrybutu, z ktÃ³rego Gutenberg juÅ¼ pobierze sobie dane.

### Å¹rÃ³dÅ‚o - children

Tutaj, wartoÅ›ciÄ… zwracanÄ… jest tablica powtarzanych elementÃ³w, ktÃ³re sÄ… dzieÄ‡mi konkretnego skrawka HTMLa, ktÃ³rego selektor podajemy:

```js
attributes: {
  list: {
    type: "array",
    source: "children",
    selector: "ol",
  },
},
```

Taki atrybut, zwrÃ³ci nam elementy listy numerowanej, na przykÅ‚ad takiej:

```html
<ol class="list">
  <li class="list__item">Element 1</li>
  <li class="list__item">Element 2</li>
  <li class="list__item">Element 3</li>
</ol>
```

### Å¹rÃ³dÅ‚o - query

Chyba najbardziej rozbudowana z opcji, bo nie zwracajÄ…ca konkretnej wartoÅ›ci, ale obiekt lub tablicÄ™, w zaleÅ¼noÅ›ci od tego, jaki typ atrybutu wpiszemy.

MajÄ…c listÄ™ podobnych elementÃ³w, na przykÅ‚ad takich oto postÃ³w z bloga:

```html
<!-- wp:cgb/block-test-block -->
<ul class="posts-list">
  <li class="post">
    <h3 class="post__title">ArtykuÅ‚ 1</h3>
    <p class="post__content">ZawartoÅ›Ä‡ artkuÅ‚u</p>
  </li>
  <li class="post">
    <h3 class="post__title">ArtykuÅ‚ 2</h3>
    <p class="post__content">ZawartoÅ›Ä‡ artkuÅ‚u</p>
  </li>
  <li class="post">
    <h3 class="post__title">ArtykuÅ‚ 3</h3>
    <p class="post__content">ZawartoÅ›Ä‡ artkuÅ‚u</p>
  </li>
</ul>
<!-- /wp:cgb/block-test-block -->
```

...jesteÅ›my w stanie pobraÄ‡ tablicÄ™ z wszystkimi tytuÅ‚ami oraz zajawkami, za pomocÄ… nastÄ™pujÄ…cego kodu:

```js
attributes: {
  content: {
    type: 'array',
    source: 'query',
    selector: '.post',
    query: {
      title: {
        type: 'text',
        selector: '.post__title',
        source: 'html',
      },
      description: {
        type: 'text',
        selector: '.post__content',
        source: 'html',
      },
    },
  },
},
```

## I jak widaÄ‡, przy okazji poprzednich przykÅ‚adÃ³w, poznaliÅ›my kilka dodatkowych wÅ‚aÅ›ciwoÅ›ci

A dokÅ‚adnie:

- selector - nazwa selektora, z ktÃ³rego chcemy pobraÄ‡ zawartoÅ›Ä‡;
- attribute - atrybut danego selektora (jeÅ›li tylko on zostanie wrzucony do atrybytÃ³w).

I dodatkowo, mamy jeszcze jednÄ…, ktÃ³ra moÅ¼e Ci siÄ™ przydaÄ‡:

- multiline - przyjmuje za wartoÅ›Ä‡ tag HTMLa, w ktÃ³rym znajdzie siÄ™ kaÅ¼da linia, ktÃ³rÄ… dodamy w edytorze Gutenberga. Na przykÅ‚ad, gdybyÅ›my chcieli wyrÃ³Å¼niÄ‡ kaÅ¼dÄ… z nich, tagami `<p>`, to moglibyÅ›my zapisaÄ‡ coÅ› takiego:

```js
attributes: {
  list: {
    type: "string",
    multiline: "p",
  }
}
```

## I tak naprawdÄ™, w tej chwili wiemy o atrybutach wszystko co najwaÅ¼niejsze!

Jedyne co nam pozostaje, to przekazaÄ‡ je do naszych funkcji `edit()` oraz `save()`, w nastÄ™pujÄ…cy sposÃ³b:

```jsx
edit({ attributes, setAttributes }) {
  return <p>CoÅ› innego, niÅ¼ "Hello world".</p>;
},

save({ attributes }) {}
```

I od tej chwili, wewnÄ…trz tych funkcji, bÄ™dziemy mieli dostÄ™p do obiektu z wszystkimi zdefiniowanymi atrybutami oraz w przypadku funkcji `edit()`, do metody `setAttributes()`, ktÃ³ra pozwala w ogÃ³le edytowaÄ‡ atrybuty (wiÄ™cej na ten temat wspominam w nagraniu do tego artykuÅ‚u, a jeszcze wiÄ™cej powiemy sobie o tym w kolejnej czÄ™Å›ci).

## I jeszcze efekt koÅ„cowy naszego bloku (na obecny moment) â˜€ï¸

WyÅ›wietlmy input, do ktÃ³rego bÄ™dziemy w stanie wrzuciÄ‡ konkretny tekst, a pÃ³Åºniej za pomocÄ… atrybutÃ³w przekazaÄ‡ go do naszej funkcji `save()`.

A pÃ³Åºniej wyÅ›wietliÄ‡ na front-endzie, jako nagÅ‚Ã³wek:

```jsx
import './index.scss';
import { registerBlockType } from '@wordpress/blocks';

registerBlockType('rob/table-of-contents', {
  title: 'Spis treÅ›ci',
  description: 'Sekcja z nagÅ‚Ã³wkiem oraz spisem treÅ›ci, konkretnego artykuÅ‚u',
  icon: 'editor-table',
  keywords: ['zawartoÅ›Ä‡', 'lista', 'table of contents'],
  category: 'content',

  attributes: {
    title: {
      type: 'string',
      source: 'html',
      selector: 'h2',
    },
  },

  edit({ attributes, setAttributes }) {
    const { title } = attributes;

    function setTitle(event) {
      const newTitle = event.target.value;
      setAttributes({ title: newTitle });
    }

    return <input type="text" value={title} onChange={setTitle} />;
  },

  save({ attributes }) {
    const { title } = attributes;

    return <h2>{title}</h2>;
  },
});
```

## Mamy to! Pora na zadanie domowe

Zadeklaruj 2 atrybuty - **tytuÅ‚u** oraz **listy**, z ktÃ³rych skÅ‚adaÄ‡ siÄ™ bÄ™dzie spis treÅ›ci, (ktÃ³ry tworzymy w ramach serii), nadajÄ…c im odpowiednie wÅ‚aÅ›ciwoÅ›ci.

Zapewne w nastÄ™pnej czÄ™Å›ci, juÅ¼ od poczÄ…tku te atrybuty bÄ™dÄ… przeze mnie utworzone, natomiast mam nadziejÄ™, Å¼e mimo tego nie bÄ™dziesz braÄ‡ zadania od kolegi - Roberta z kolejnego filmu lub artykuÅ‚u, a zrobisz caÅ‚oÅ›Ä‡ sam lub sama i dziÄ™ki temu przeÄ‡wiczysz temat atrybutÃ³w ğŸ˜

OczywiÅ›cie nie zapomnij podzieliÄ‡ siÄ™ rozwiÄ…zaniem w komentarzu!
