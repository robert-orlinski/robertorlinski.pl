---
title: Jak usuwaÄ‡ style oraz skrypty, pobierane przez wtyczki (i motywy) w WordPressie?
seoTitle: Jak usuwaÄ‡ style oraz skrypty wtyczek w WordPressie?
abstract: kontrola-zasobow-pobieranych-przez-wtyczki
isPublished: true
topics:
  - WordPress
date: 23.11.2020
isPopular: false
menuOrder: 0
---

Wiadomo jak to jest z tymi wtyczkami.

NajchÄ™tniej, nie uÅ¼ywalibyÅ›my ani jednej, bo czym ich wiÄ™cej, tym z reguÅ‚y wolniejsza strona, tym wiÄ™cej podatnoÅ›ci w konkretnym serwisie i wreszcie wiÄ™ksza potrzeba dbania o niego - chociaÅ¼by przez regularne aktualizacje, czy odnawianie licencji, w przypadku tych pÅ‚atnych pluginÃ³w.

import VideoInterlude from 'VideoInterlude';

<VideoInterlude
  id="a6CtXekVir8"
  title="WÅ‚asne bloki w WordPress Gutenberg #008 â€“ panel boczny (sidebar)"
/>

Ale jest teÅ¼ inna kategoria sytuacji.

SÄ… to te, w ktÃ³rych instalujemy (sprawdzone) wtyczki, ktÃ³re znacznie usprawniajÄ… naszÄ… pracÄ™, przy tworzeniu witryny lub pracÄ™ klienta lub przyszÅ‚ego administratora, przy zarzÄ…dzaniu samÄ… stronÄ…. A jednoczeÅ›nie same w sobie, sÄ… po prostu dobrym kawaÅ‚kiem kodu.

> Jedna uwaga na sam poczÄ…tek - w artykule oraz filmie, odnoszÄ™ siÄ™ do wtyczek, ale oczywiÅ›cie nic nie stoi na przeszkodzie, aby sposoby podane tu, zastosowaÄ‡ rÃ³wnieÅ¼ dla ogÃ³lnodostÄ™pnych motywÃ³w!
>
> To tak gwoli Å›cisÅ‚oÅ›ci ğŸŒ·

## W takich sytuacjach czÄ™sto, mimo wszystko, nie wymyÅ›lamy koÅ‚a na nowo i decydujemy siÄ™ na danÄ… wtyczkÄ™

PrzykÅ‚adem takiego pluginu, bÄ™dzie znany caÅ‚emu Å›wiatu Contact Form 7.

Ogrom stron, korzysta z jego dobrodziejstw, do tego stopnia, Å¼e nawet klienci, czÄ™sto go preferujÄ…, ze wzglÄ™du na to, Å¼e po prostu znajÄ… juÅ¼ jego interfejs.

Tylko w przypadku Contact Form 7, jak i wielu innych wtyczek, nie zawsze chcemy, aby ich domyÅ›lne style, czy teÅ¼ skrypty, byÅ‚y Å‚adowane, aby po prostu - nie obciÄ…Å¼aÄ‡ strony kodem, ktÃ³ry niekoniecznie zostanie uÅ¼yty albo bÄ™dzie musiaÅ‚ zostaÄ‡ na siÅ‚Ä™ nadpisany.

I tak w przypadku wspomnianego pluginu do formularzy, ja zawsze usuwam domyÅ›lne style. I tak ogÃ³lnie, jestem niemaÅ‚ym fanem usuwania wielu domyÅ›lnych assetÃ³w z wtyczek. OczywiÅ›cie tych, ktÃ³re nie ograbiajÄ… samych pluginÃ³w, z ich funkcjonalnoÅ›ci.

## No dobrze, wstÄ™p wstÄ™pem. SprawdÅºmy jak to siÄ™ robi!

PostanowiÅ‚em, przygotowaÄ‡ na ten cel, czystego WordPressa, do ktÃ³rego doinstalowaÅ‚em dwie z grona najpopularniejszych wtyczek:

![](./wtyczki.jpg)

Pierwsza rzecz, ktÃ³rÄ… trzeba bÄ™dzie tutaj zrobiÄ‡, to w ogÃ³le dowiedzieÄ‡ siÄ™, co dokÅ‚adnie, jest Å‚adowane na tej stronie i jakÄ… nazwÄ™ ma to w WordPressie (jak moÅ¼esz przeczytaÄ‡ w [jednym z moich starszych wpisÃ³w](./artykuly/jak-stworzyc-motyw-wordpress-006), zwiÄ…zanych z tworzeniem wÅ‚asnego motywu WordPress, kaÅ¼dy asset, podpiÄ™ty pod WordPressa, ma wÅ‚asnÄ… nazwÄ™, tzw `handle`.

Aby tego dokonaÄ‡ potrzebujemy takiego oto kodu, ktÃ³ry wyÅ›wietli wszystkie assety, podpiÄ™te pod aktualnie wyÅ›wietlany widok w WordPressie:

```php
// functions.php

function get_all_stylesheets() {
    global $wp_styles;

	echo 'Style:<br><br>';
    print_r( $wp_styles->queue );
	echo '';
}
add_action( 'wp_print_styles', 'get_all_stylesheets' );

function get_all_scripts() {
    global $wp_scripts;

	echo 'Skrypty:<br><br>';
    print_r( $wp_scripts->queue );
	echo '';
}
add_action( 'wp_print_scripts', 'get_all_scripts' );
```

Owe dwie funkcje, wyÅ›wietlÄ… nam, wszystkie podpiÄ™te skrypty JS oraz style CSS, na gÃ³rze samej strony zaraz przed miejscem w sekcji `<head></head>` caÅ‚ej strony.

> OczywiÅ›cie tagi `<pre></pre>` oraz nagÅ‚Ã³wek wraz z tagami `<br />`, zostaÅ‚y dodane tylko po to, aby wyÅ›wietlona lista, wyglÄ…daÅ‚a bardziej estetycznie - nie sÄ… one niezbÄ™dne.

I jak jesteÅ›my przy wyglÄ…dzie caÅ‚oÅ›ci, to koniec koÅ„cÃ³w, naszym oczom, mogÄ… ukazaÄ‡ siÄ™ obiecane nazwy, podpiÄ™tych assetÃ³w:

![](./wszystkie-zasoby.jpg)

Huh, sporo tego.

Co dla nas najwaÅ¼niejsze - oba pluginy, pobierajÄ… Å‚Ä…cznie 6 arkuszy stylÃ³w oraz 4 pliki JS, i to pomimo faktu, Å¼e Å¼aden nie jest realnie uÅ¼ywany, na tej konkretnej podstronie (w tym przypadku - stronie gÅ‚Ã³wnej motywu Twenty Twenty)!

WiÄ™c tak, definitywnie trzeba coÅ› z tym zrobiÄ‡.

Zostawmy ten konkretny kod, aby na bieÅ¼Ä…co wiedzieÄ‡, czy nasze usuwanie konkretnych assetÃ³w, przynosi skutek i przejdÅºmy wÅ‚aÅ›nie do tej czynnoÅ›ci.

## To jak moÅ¼emy usunÄ…Ä‡ jakikolwiek skrypt JS lub styl CSS, z konkretnej strony?

JuÅ¼ odpowiadam - za pomocÄ… dwÃ³ch, doÅ›Ä‡ podobnych funkcji, przypiÄ™tych do hooku `wp_enqueue_scripts()`.

```php
// functions.php

function remove_plugin_assets() {
	wp_dequeue_style( 'contact-form-7' );
	wp_dequeue_script( 'wc-cart-fragments' );
}
add_action( 'wp_enqueue_scripts', 'remove_plugin_assets', 999 );
```

Pierwsza z nich, wp_dequeue_style odpina konkretny styl (identyfikowany nazwÄ…, ktÃ³rÄ… zdobyliÅ›my w poprzednim akapicie, wpisanÄ… w nawiasie). W tym przypadku odpiÄ™liÅ›my style wtyczki Contact Form 7.

Druga z kolei, analogicznie, odpina skrypty. Tutaj wyrzuciliÅ›my z naszej strony plik pobierany przez plugin WooCommerce.

> O czym warto jeszcze wspomnieÄ‡, to wartoÅ›Ä‡ 999, na koÅ„cu czÄ™sto nie bÄ™dzie niezbÄ™dna. Po prostu, akcje, podpinajÄ…ce konkretne style (z poziomu wtyczek), czasami majÄ… ustawiony priorytet wiÄ™kszy, niÅ¼ standardowe 10, przez co, ustawiajÄ…c go, jako bardzo duÅ¼Ä… liczbÄ™, mamy pewnoÅ›Ä‡, Å¼e nasze assety zawsze zostanÄ… odpiÄ™te.

I tak oto, spÃ³jrzmy na listÄ™ z poczÄ…tku artykuÅ‚u:

![](./zasoby-po-usunieciu.jpg)

CÃ³Å¼ tu duÅ¼o mÃ³wiÄ‡ - cel osiÄ…gniÄ™ty!

## A co w sytuacji, gdy konkretny asset, chcemy odpiÄ…Ä‡ dla konkretnej strony, grupy podstron, wpisu lub czegokolwiek innego?

Nic prostszego!

Wystarczy, do utworzonej juÅ¼ funkcji, dodaÄ‡ odpowiedni warunek. Na przykÅ‚ad, jeÅ›li wspomniana dwÃ³jka plikÃ³w, miaÅ‚aby zostaÄ‡ odpiÄ™ta tylko na strony gÅ‚Ã³wnej, to caÅ‚oÅ›Ä‡, wyglÄ…daÅ‚aby w ten sposÃ³b:

```php
// functions.php

function remove_plugin_assets() {
  	if( is_front_page() ) {
        wp_dequeue_style( 'contact-form-7' );
        wp_dequeue_script( 'wc-cart-fragments' );
    }
}
add_action( 'wp_enqueue_scripts', 'remove_plugin_assets', 999 );
```

Tym oto sposobem, gdybyÅ›my chcieli na przykÅ‚ad odpiÄ…Ä‡ wszystkie assety, zwiÄ…zane z WooCommerce, na stronie gÅ‚Ã³wnej oraz stronie bloga (bo te 2 strony, nie majÄ… w danej chwili Å¼adnej stycznoÅ›ci z funkcjami sklepu), to moglibyÅ›my skorzystaÄ‡ z takiego skrawka kodu:

```php
// functions.php

function remove_plugin_assets() {
  	if( is_front_page() || is_home() ) {
		wp_dequeue_style( array(
			'wp-block-library',
			'wc-block-style',
			'woocommerce-layout',
			'woocommerce-smallscreen',
			'woocommerce-inline',
			'woocommerce-general'
		) );

		wp_dequeue_script( array(
			'wc-add-to-cart',
			'woocommerce',
			'wc-cart-fragments'
		) );
	}
}
add_action( 'wp_enqueue_scripts', 'remove_plugin_assets', 999 );
```

Dodatkowo, jak Å‚atwo moÅ¼esz zauwaÅ¼yÄ‡, parametrami funkcji odpinajÄ…cych poszczegÃ³lne assety, mogÄ… rÃ³wnieÅ¼ byÄ‡ rÃ³wnieÅ¼ tablice, wiÄ™c nie ma Å¼adnego problemu, aby wyrzuciÄ‡ z konkretnego miejsca w serwisie, wiÄ™cej skryptÃ³w lub arkuszy, za pomocÄ… pojedynczej funkcji!

## I to tyle na dziÅ›!

WordPress, na nasze (oraz stron tworzonych przez nas) szczÄ™Å›cie, pozwala doÅ›Ä‡ dobrze kontrolowaÄ‡, jaki kod, Å‚adowany jest przez wszelkie wtyczki oraz motywy. A dziÄ™ki temu, moÅ¼emy tworzyÄ‡ sprawniej dziaÅ‚ajÄ…ce witryny!

Mam nadziejÄ™, Å¼e wiedza z tego artykuÅ‚u, przyda siÄ™, aby z Twojej rÄ™ki, powstawaÅ‚y tylko takie ğŸ”¥
