---
title: 'Wasne bloki w WordPress Gutenberg #002 - waciwoci, wasne kategorie blok贸w i style CSS'
seoTitle: Waciwoci, style CSS i kategorie blok贸w Gutenberg
abstract: W drugiej czci serii WordPress Gutenberg, zajmiemy siwaciwociami, kategoriami oraz stylami CSS, wasnych blok贸w Gutenberga 
isPublished: true
topics:
  - WordPress
  - Wasne bloki w WordPress Gutenberg
date: 02.12.2020
isPopular: false
---

Kolejna cz naszego cyklu i tym samym kolejne elementy, kt贸re warto bdzie przyswoi w kontekcie tworzenia komponent贸w WordPress Gutenberga.

To, co chciabym Ci dzi pokaza, to:

1. Za co odpowiadaj poszczeg贸lne podstawowe waciwoci, niezbdne do dziaania konkretnego bloku.
2. Jak tworzy wasne kategorie blok贸w Gutenberga.
3. Jak korzysta z plik贸w SCSSa, podczas ich tworzenia.
4. Jak podpina arkusze CSS (napisane przez siebie lub wygenerowane z SCSSa) do konkretnych blok贸w. Osobno dla naszego edytora i osobno dla konkretnego artykuu lub strony, widocznej dla u偶ytkownika.

import VideoInterlude from 'VideoInterlude';

<VideoInterlude
  id="yGEkbXR38Ys"
  title="Wasne bloki w WordPress Gutenberg #002 - waciwoci, wasne kategorie blok贸w i style CSS"
/>

Nie przedu偶ajc - dziaamy!

## Wr贸my do naszego prostego bloku, utworzonego w czci pierwszej kursu

Cay kod, zapisany wtedy w pliku `index.js`, wyglda w ten spos贸b:

```jsx
import { registerBlockType } from '@wordpress/blocks';

registerBlockType('rob/table-of-contents', {
  title: 'Spis treci',
  description: 'Sekcja z nag贸wkiem oraz spisem treci, konkretnego artykuu',
  icon: 'editor-table',
  keywords: ['zawarto', 'lista', 'table of contents'],
  category: 'layout',

  edit() {
    return <p>Co innego, ni偶 "Hello world".</p>;
  },

  save() {},
});
```

**Przejd藕my przez niego linia po linii.**

W pierwszej kolejnoci, importujemy funkcj `registerBlockType()` i od razu u偶ywamy, podajc nazw bloku, razem ze zdefiniowan przez nas przestrzeni nazw, w ramach pierwszego argumentu oraz wszystkimi waciwociami, jak i metodami, definiujcymi dany blok, w ramach argumentu drugiego.

> W tym przypadku jest to namespace `rob`, ale oczywicie Ty w to miejsce, mo偶esz wrzuci cig tekstowy, kt贸ry bdzie zupenie inny.

## Z podstawowych waciwoci ka偶dego nowego bloku Gutenberga, na pewno warto wyr贸偶ni:

```jsx
title: 'Spis treci',
description: 'Sekcja z nag贸wkiem oraz spisem treci, konkretnego artykuu',
icon: 'editor-table',
keywords: [ 'zawarto', 'lista', 'table of contents' ],
category: 'layout',
```

Pierwsze 2 parametry s najbardziej oczywiste. Mamy nazw bloku, kt贸r widzimy ju偶 w samym edytorze oraz opis bloku.

P贸藕niej jest ikonka, kt贸ra mo偶e pochodzi z tzw. [dashicons WordPressa](https://developer.wordpress.org/resource/dashicons) lub zosta dodana, jako kod z pliku .svg, na przykad:

```jsx
icon: <svg height="512pt" viewBox="0 -52 512.00001 512" width="512pt" xmlns="http://www.w3.org/2000/svg"><path d="m0 113.292969h113.292969v-113.292969h-113.292969zm30.003906-83.289063h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 0v113.292969h362.703125v-113.292969zm332.699219 83.292969h-302.695313v-53.289063h302.695313zm0 0"/><path d="m0 260.300781h113.292969v-113.292969h-113.292969zm30.003906-83.292969h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 260.300781h362.703125v-113.292969h-362.703125zm30.003906-83.292969h302.695313v53.289063h-302.695313zm0 0"/><path d="m0 407.308594h113.292969v-113.296875h-113.292969zm30.003906-83.292969h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 407.308594h362.703125v-113.296875h-362.703125zm30.003906-83.292969h302.695313v53.289063h-302.695313zm0 0"/></svg>,
```

I co bardzo ciekawe, mo偶emy r贸wnie偶 wyr贸偶ni konkretn ikonk, definiujc jej kolor oraz kolor samego ta (dziaa to dla ikon dodanych w ramach kodu .svg, jak i dashikon). Na przykad za pomoc takiego kodu:

```jsx
icon: {
    background: '#37474F',
    foreground: '#4DB6AC',
    src: <svg height="512pt" viewBox="0 -52 512.00001 512" width="512pt" xmlns="http://www.w3.org/2000/svg"><path d="m0 113.292969h113.292969v-113.292969h-113.292969zm30.003906-83.289063h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 0v113.292969h362.703125v-113.292969zm332.699219 83.292969h-302.695313v-53.289063h302.695313zm0 0"/><path d="m0 260.300781h113.292969v-113.292969h-113.292969zm30.003906-83.292969h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 260.300781h362.703125v-113.292969h-362.703125zm30.003906-83.292969h302.695313v53.289063h-302.695313zm0 0"/><path d="m0 407.308594h113.292969v-113.296875h-113.292969zm30.003906-83.292969h53.289063v53.289063h-53.289063zm0 0"/><path d="m149.296875 407.308594h362.703125v-113.296875h-362.703125zm30.003906-83.292969h302.695313v53.289063h-302.695313zm0 0"/></svg>,
},
```

Kolejna waciwo, to z kolei grupa s贸w kluczowych (zapisanych w formie tablicy), kt贸re decyduj o tym, po jakich frazach bdziemy w stanie wyszuka konkretny blok, korzystajc z widocznej na powy偶szym zrzucie wyszukiwarki.

I ostatnia, to oczywicie kategoria danego bloku, kt贸ra m贸wi, do kt贸rej sekcji w edytorze, zostanie on przyporzdkowany. Z kolei same kategorie, kt贸re domylnie istniej w Gutenbergu, to:

- common;
- formatting;
- layout;
- widgets;
- embed.

Wasne komponenty, mo偶emy przypisywa do ka偶dej z tych kategorii lub do innych, zdefiniowanych ju偶 wasnorcznie.

## Wanie - jak mo偶emy zdefiniowa now kategori?

Za pomoc poni偶szego kodu PHP, dodanego gdzie w tworzonym przez nas pluginie (ja zrobiem to w g贸wnym pliku - `table-of-contents.php`) lub w plikach u偶ywanego w danej chwili motywu:

```php
function custom_blocks_block_categories( $categories ) {
    return array_merge(
        $categories,
        array(
            array(
                'slug' 	=> 'content',
                'title' => __( 'Zawarto', 'table-of-contents' )
            ),
        )
    );
}
add_filter( 'block_categories', 'custom_blocks_block_categories', 10, 2 );
```

**Co si tu dzieje?**

Filtrujemy funkcj wbudowan `block_categories()`, dodajc do `$categories`, nowy element - tablic, definiujc konkretn kategori blok贸w.

Tablica ta, zawiera w sobie slug nowo-utworzonej kategorii oraz nazw, pokazujc si w licie wszystkich blok贸w.

W ten oto spos贸b, przypisujc nasz spis treci, do nowo utworzonej kategorii:

```jsx
category: 'content',
```

## A teraz, zajmijmy si stylami CSS

A dokadnie plikami SCSS. Bo dziki temu, 偶e w [poprzedniej czci serii](/wordpress-gutenberg-001), zainstalowalimy paczk `@wordpress/scripts`, teraz bardzo atwo mo偶emy automatycznie kompilowa pliki SCSS, do CSS, podobnie jak robimy to z plikami JavaScriptu, zapisanymi w skadni JSXa.

A dokadnie, wystarczy, 偶e utworzymy konkretny plik, o rozszerzeniu `.scss` w folderze `/src` i **zaimportujemy go do pliku index.js, kt贸ry utworzylimy wczeniej!**

Dla przykadu, ja utworz plik, o nazwie `index.scss`, wanie w tym katalogu, a na pocztku wspomnianego pliku JS, wrzuc tak oto linijk:

```jsx
import './index.scss';
```

I od teraz, w momencie gdy odpalimy nasz projekt lub go zbudujemy, w folderze `/build`, pojawi si plik `index.css` z odpowiednio skompilowanym kodem CSS!

Z t linijk, sam plik `index.js`, od tej chwili wyglda w ten spos贸b:

```jsx
import './index.scss';
import { registerBlockType } from '@wordpress/blocks';

registerBlockType('rob/table-of-contents', {
  title: 'Spis treci',
  description: 'Sekcja z nag贸wkiem oraz spisem treci, konkretnego artykuu',
  icon: 'editor-table',
  keywords: ['zawarto', 'lista', 'table of contents'],
  category: 'content',

  edit() {
    return <p>Co innego, ni偶 "Hello world".</p>;
  },

  save() {},
});
```

## A z kolei plik index.css, mo偶emy podpi pod nasz blok!

Nie bez powodu, tutaj oraz w tytule caego artykuu, na si wspominam o arkuszach, a nie stylach samych w sobie. Robi tak dlatego, 偶e jedn z waciwoci blok贸w WordPressa, s tzw. `styles`, o kt贸rych powiem wkr贸tce, a kt贸re to (tylko kr贸tko napominajc), pozwalaj nam definiowa kilka wizualnych wariant贸w danego bloku, za pomoc waciwoci `styles`, funkcji `registerBlockType()`.

A tutaj z kolei, m贸wimy tylko o podpinaniu arkuszy CSS, speniajcych swoj standardow rol - okrelajcych, jak bdzie wyglda dany blok.

Cao zrealizujemy w wspomnianej w pierwszej czci serii, funkcji `register_block_type()`, zapisanej w PHPie. Tam w pierwszej czci serii, zapisalimy taki oto skrawek kodu:

```php
register_block_type( 'rob/table-of-contents', array(
  'editor_script' => 'table-of-contents'
) );
```

I teraz, dodamy do niego 2 dodatkowe elementy, koczc z nastpujc zawartoci:

```php
register_block_type( 'rob/table-of-contents', array(
    'editor_script' => 'table-of-contents',
    'editor_style'  => 'table-of-contents-style',
    'style'         => 'table-of-contents-style',
) );
```

Jak atwo si domyli, do `editor_style` podpinamy identyfikator arkusza, adujcego si w samym edytorze (dziki czemu, edytujc konkretny blok, mo偶emy od razu widzie go w penej okazaoci, bez sprawdzania podgldu konkretnej podstrony lub artykuu).

Z kolei do klucza `style`, przypiszemy arkusz, kt贸ry poka偶e si ju偶 na samym front-endzie.

Tutaj i tutaj, mo偶emy wrzuci dokadnie te same identyfikatory i w ten spos贸b podpi taki sam arkusz, natomiast nic nie stoi na przeszkodzie, aby to rozdzieli i co troch innego adowa w panelu, jak i w wersji widocznej dla u偶ytkownika.

I oczywicie, **zdefiniowa trzeba sam arkusz styli!** Zrobimy to, rozszerzajc funkcj `add_gutenberg_assets`, zdefiniowan ju偶 w poprzedniej czci kursu, o zastosowanie innej funkcji, tym razem wbudowanej - `wp_register_style`:

```php
function add_gutenberg_assets() {

    wp_register_script(
        'table-of-contents',
        plugin_dir_url( __FILE__ ) . 'build/index.js',
        array( 'wp-blocks' )
    );

    wp_register_style(
        'table-of-contents-style',
        plugin_dir_url( __FILE__ ) . 'build/index.css'
    );

    register_block_type( 'rob/table-of-contents', array(
        'editor_script' => 'table-of-contents',
        'editor_style'  => 'table-of-contents-style',
        'style'         => 'table-of-contents-style',
    ) );

}
add_action( 'init', 'add_gutenberg_assets' );
```

Oczywicie plik, kt贸ry podpilimy, to wygenerowany wczeniej w folderze `/build`, plik `index.css`.

## To co? Zadanie domowe!

Tym razem bdzie bardzo szybko 

Sprawd藕, co si stanie (w kodzie HTML edytora), gdy w obrbie funkcji `add_gutenberg_assets()` utworzysz nowy, testowy blok WordPressa i podepniesz pod niego dokadnie te same style, kt贸re zostay ju偶 u偶yte dla bloku ze spisem treci.

> Sam kod HTML, mo偶esz oczywicie podejrze, sprawdzajc 藕r贸do strony, po klikniciu prawym przyciskiem myszy, na Tw贸j edytor Gutenberga.

Czy plik `main.css` adowany jest 2 razy, co si psuje, a mo偶e nic si nie zmienio i przez to aduje si on raz, dla obu blok贸w?

Gdy ju偶 to stwierdzisz, nie zapomnij da zna poni偶ej, w komentarzu!
